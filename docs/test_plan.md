# テスト計画

## 1. テスト戦略

本プロジェクトでは、主に以下のテスト戦略を採用します。

- **単体テスト (Unit Testing)**: 各コンポーネント、モジュール、関数が単独で正しく機能するかを確認します。特にデータ管理ロジックやタイマーロジックなど、ビジネスロジックが集中する部分で重点的に実施します。
- **結合テスト (Integration Testing)**: 複数のコンポーネントやモジュールが連携して正しく機能するかを確認します。UIとデータ管理の連携、タイマーとTODO表示の連携などが対象となります。
- **UIテスト (UI Testing)**: ユーザーインターフェースが要件通りに表示され、ユーザー操作に対して適切に反応するかを確認します。ドラッグ＆ドロップ機能やポモドーロ進捗円の表示などがこれに該当します。
- **受け入れテスト (Acceptance Testing)**: 定義された機能要件がすべて満たされているかをユーザー視点で確認します。最終的な動作確認として実施します。

## 2. テストケース設計

各作業項目に対応するテストケースを設計します。

### 2.1 TODOデータ管理モジュール (`src/stores/todoStore.ts`)

| テストケースID | 項目 | 説明 | 期待結果 | テストタイプ |
|---|---|---|---|---|
| TD001 | TODO追加 | 新しいTODOアイテムが正しく追加されるか | TODOリストにアイテムが追加され、Local Storageに保存される | 単体 |
| TD002 | TODO編集 | 既存のTODOアイテムが正しく編集されるか | 指定のTODOアイテムの内容が更新され、Local Storageに保存される | 単体 |
| TD003 | TODO削除 | 既存のTODOアイテムが正しく削除されるか | TODOリストからアイテムが削除され、Local Storageから削除される | 単体 |
| TD004 | TODO取得 | Local StorageからTODOリストが正しく読み込まれるか | 保存されたTODOリストが取得される | 単体 |
| TD005 | TODO順序変更 | TODOアイテムの順序がドラッグ＆ドロップで正しく変更されるか | TODOリストの順序が変更され、Local Storageに保存される | 単体 |
| TD006 | 完了マーク | TODOを完了状態にすると、`isCompleted`がtrueになるか | `isCompleted`がtrueになり、Local Storageに保存される | 単体 |
| TD007 | ポモドーロ完了回数更新 | ポモドーロが完了するたびに、TODOのポモドーロ完了回数が増えるか | `pomodorosCompleted`が正しくインクリメントされ、Local Storageに保存される | 単体 |

### 2.2 ポモドーロタイマー機能のロジック (`src/hooks/usePomodoroTimer.ts`, `src/utils/timer.ts`)

| テストケースID | 項目 | 説明 | 期待結果 | テストタイプ |
|---|---|---|---|---|
| PT001 | タイマー開始 (TODOクリック) | TODOアイテムをクリックすると、25分作業タイマーが正しく開始されるか | タイマーがカウントダウンを開始し、`isWorking`がtrueになる | 単体/結合 |
| PT002 | 作業タイマー自動停止 | 25分経過後に作業タイマーが自動停止するか | タイマーが停止し、音とポップアップ通知がトリガーされる | 単体 |
| PT003 | 休憩タイマー開始 (ユーザークリック) | 作業タイマー停止後、ユーザーがTODOの〇マークをクリックすると5分休憩タイマーが開始されるか | 休憩タイマーがカウントダウンを開始し、`isWorking`がfalseになる | 単体/結合 |
| PT004 | 休憩タイマー自動停止 | 5分経過後に休憩タイマーが自動停止するか | タイマーが停止し、音とポップアップ通知がトリガーされる | 単体 |
| PT005 | 作業再開 (ユーザークリック) | 休憩タイマー停止後、ユーザーがTODOアイテムを再度クリックすると次の作業が開始されるか | 25分作業タイマーが開始される | 単体/結合 |
| PT006 | 残り時間表示 | タイマーの残り時間が正確に表示されるか | 表示される残り時間が実際の時間と一致する | 単体 |
| PT007 | 通知 | 作業/休憩の切り替わり時に音とポップアップ通知がトリガーされるか | 音が鳴り、ポップアップが表示される | 単体/結合 |

### 2.3 UIコンポーネント (`src/components/*`)

| テストケースID | 項目 | 説明 | 期待結果 | テストタイプ |
|---|---|---|---|---|
| UI001 | TODOリスト表示 | TODOアイテムがリストに正しく表示されるか | 追加されたTODOがリストに表示される | 結合/UI |
| UI002 | TODO完了UI | 完了したTODOが太字と星マークで表示されるか | 完了TODOのスタイル（太字、星マーク）が要件通りに適用される | 結合/UI |
| UI003 | 進捗円表示 | TODOクリック時に進捗円（〇マーク）が正しく表示されるか | TODOの横に進捗円が表示される | 結合/UI |
| UI004 | ポモドーロ完了時のUI変化 | 作業タイマー完了後、ユーザーがアクティブなTODOをクリックすると進捗円が消え、ポモドーロ完了回数を示す「×」マークが追加されるか | 進捗円が消え、ポモドーロ完了回数に応じた「×」マークが追加表示され、休憩タイマーが開始される | 結合/UI |
| UI005 | ポモドーロ完了回数表示 | TODOアイテムの横にポモドーロ完了回数が表示されるか | 正しい回数が表示される | 結合/UI |
| UI006 | レスポンシブ対応 | PCとスマートフォンでUIが適切に表示されるか | 各デバイスの画面サイズに応じてレイアウトが崩れない | UI |

## 3. テスト環境構築手順

1.  **Node.jsとnpm/yarnのインストール**: 
    - Node.jsの公式ウェブサイトから最新のLTS版をダウンロードし、インストールします。
    - npm (Node.jsに含まれる) または yarn を使用します。

2.  **プロジェクトのクローン**: 
    - 開発リポジトリからプロジェクトをローカルにクローンします。
    `git clone [リポジトリURL]`

3.  **依存関係のインストール**: 
    - プロジェクトディレクトリに移動し、必要な依存関係をインストールします。
    `npm install` または `yarn install`

4.  **開発サーバーの起動**: 
    - 開発中にアプリケーションをプレビューするために開発サーバーを起動します。
    `npm run dev` または `yarn dev`

5.  **テストの実行**: 
    - 単体テストや結合テストを実行するためのコマンドです。
    - 具体的なテストフレームワーク (例: Vitest, Jest) の設定後に詳細を追記します。
    `npm test` または `yarn test` (予定)

6.  **ビルド**: 
    - 本番環境向けのアプリケーションをビルドします。
    `npm run build` または `yarn build` 